FROM mrshang/jre8

# put nacos to /home/ebnas
RUN mkdir /home/ebnas
COPY demos/provider1/target/ebnas-provider1-1.1.3.jar /home/ebnas/
COPY demos/provider1/startup.sh /home/ebnas/

ENV BASE_DIR="/home/ebnas"
	
WORKDIR $BASE_DIR

# set startup log dir
RUN mkdir -p logs \
	&& cd logs \
	&& touch start.out \
	&& ln -sf /dev/stdout start.out \
	&& ln -sf /dev/stderr start.out
    
RUN chmod a+x startup.sh

VOLUME $BASE_DIR/logs

EXPOSE 8089

ENTRYPOINT ["./startup.sh"]